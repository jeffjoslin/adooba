<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello World</title>
    <script>
        (function() {
            // Function to check if the visitor is a bot
            function isBot() {
                const userAgent = navigator.userAgent.toLowerCase();
                return /bot|crawl|spider|chatgpt|google|bing|yandex|baidu/.test(userAgent);
            }

            // Function to fetch dynamic content
            async function fetchDynamicContent() {
                try {
                    const response = await fetch("https://dynamic-api-3s4e.onrender.com/dynamic-content-html?query=example");
                    const content = await response.text();
                    
                    // Inject dynamic content into the page for bots
                    const dynamicContainer = document.getElementById("dynamic-content");
                    if (dynamicContainer) {
                        dynamicContainer.innerHTML = content;
                    }
                } catch (error) {
                    console.error("Error fetching dynamic content:", error);
                    const dynamicContainer = document.getElementById("dynamic-content");
                    if (dynamicContainer) {
                        dynamicContainer.innerHTML = "<p>Failed to load dynamic content.</p>";
                    }
                }
            }

            // Run the detection and fetch dynamic content for bots
            if (isBot()) {
                fetchDynamicContent();
            }
        })();
    </script>
</head>
<body>
    <h1>Hello World</h1>
    <p>This is the static content visible to regular visitors.</p>
    <p>The following section shows dynamic content for bots and visitors:</p>
    
    <!-- Placeholder for dynamic content -->
    <div id="dynamic-content">
        Loading dynamic content...
    </div>
</body>
</html>
